{% extends 'master.html' %}
{% load static %}
{% block content %}
    <br>
    <div class="center-screen">
        <img src="{% static 'images/4jango.png' %}" alt="logo" class="logo" width="13%" height="13%">
    </div>
    <br>
    <h2 class="center-screen">Post something, {{ user.username }}!</h2>
    <div class="newPostForm center-screen">
    <form class="form-group" action="/new_post/" method="post" enctype="multipart/form-data" nullabl>
        <textarea class="textInput" name="username" rows="1" cols="40" placeholder="username" maxlength="30"></textarea><br>
        <textarea class="textInput" name="title" rows="1" cols="40" placeholder="title" maxlength="40"></textarea><br>
        <textarea class="textInput" name="content" rows="5" cols="40" placeholder="content"></textarea><br>
        <input class="form-control-file" type="file" name="image" placeholder="image" accept="image/*"><br>        
            <select class="selectCategory"name="category">
                {% for category in categories %}
                <option value="{{ category.categoryid }}">{{ category.name }}</option>
                {% endfor %}
            </select>        
        <input type="submit" value="Submit"><br>
    </form>
    </div>

    <div class="postContainer">
        <h3>All my posts</h3>
        {% for post in posts %}
        <div class="postContainer">
            <table class="postTable">
                <tr>
                    <td class="postTableTitle">
                        <a href="/post/{{ post.post_id }}" target="_blank"><h2>{{ post.title }}</h2></a>
                    </td>
                </tr>
                <tr>
                    <td class="postTableDetails"><p><small>#{{ post.post_id }}</small></p></td>
                    <td class="postTableDetails"><p><small>{{ post.post_date }}</small></p></td>
                </tr>
                <tr>
                    <td class="postTableUser"><h4>{{ post.username }} </h4></td>
                </tr>
                <tr>
                    <td class="postTableContent"><p>{{ post.content }}</p></td>
                    {% if post.image %}
                    <td class="postTableImage"><a href="../media/{{ post.image }}" target="_blank"><img style="width:20%; height:20%" src="../media/{{ post.image }}" loading="lazy"></a></td>
                    {% endif %}
                </tr>
            </table>
        </div>
        {% endfor %}
    </div>
{% endblock %}